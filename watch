#!/bin/sh


echo "  About to watch"
echo "    please have inotifywait and git..."
echo ""

git_stuff () {
  git checkout -b ${BRANCH} 2> /dev/null
  git checkout ${BRANCH}

  git add .
  git commit --no-gpg-sign -m "auto-commit"
  git push origin ${BRANCH}
}



git_stuff

inotifywait -m ./ -e CLOSE_WRITE -e create |
  while read path action file; do
    echo "$path" "$action" "$file"

    git_stuff
  done

